# FreeBSD 2024 年第二季度状态报告

- 原文链接：<https://www.freebsd.org/status/report-2024-04-2024-06/>
- 最后修改：Lorenzo Salvadore 于 2024 年 8 月 18 日

这是 2024 年的第二份进展报告，共包含 20 个条目。

这次发布进展报告比平时要困难得多：实际上我们已经迟了。不幸的是，很多成员在 FreeBSD 项目内外都非常忙碌，因此一些报告迟到了，报告的发布速度也比往常慢。希望这只是一个例外，我们将在下一季度恢复正常，并在 2024 年 10 月内发布 2024 年第三季度的报告。

祝阅读愉快。

Lorenzo Salvadore，
状态团队

## FreeBSD 团队报告

来自各个官方和半官方团队的条目，如在[管理页面](https://www.freebsd.org/administration/)中找到的。

### FreeBSD 核心团队

联系方式: FreeBSD 核心团队 <core@FreeBSD.org>

FreeBSD 核心团队是 FreeBSD 的管理机构。

#### 开发者峰会 202405

核心团队在 202405 开发者峰会上发布了状态更新。详情请访问：[https://wiki.freebsd.org/DevSummit/202405](https://wiki.freebsd.org/DevSummit/202405)

#### Mike Karels 的逝世

我们沉痛地获悉 Mike Karels 最近的逝世。我们向他的家人、朋友和社区表示诚挚的哀悼。Mike 是一位令人敬仰的开发者，他的离世是一个巨大的损失。

[怀念 Mike Karels](https://lists.freebsd.org/archives/freebsd-announce/2024-June/000135.html)。

更多关于他的详细信息，请访问 FreeBSD 基金会的页面：

[https://freebsdfoundation.org/mike_karels/](https://freebsdfoundation.org/mike_karels/)

#### 2024 核心团队选举

核心团队 Core.12 任命了 Muhammad Moinur Rahman（bofh@）和 Allan Jude（allanjude@）为 2024 年核心团队选举的管理人。在 Allan 决定参选后，Moin 继续独立处理所有选举事务。

选举结果于 6 月 12 日公布，选出了 8 名成员：

- Allan Jude（allanjude@）
- Dave Cottlehuber（dch@）
- Gleb Smirnoff（glebius@）
- Hiroki Sato（hrs@）
- Li-Wen Hsu（lwhsu@）
- Mathieu Arnold（mat@）
- Olivier Cochard（olivier@）
- Tobias C. Berner（tcberner@）

Mike Karels 也参加了 2024 年核心团队选举，并在结果中名列前九。在讨论后，核心团队 Core.13 决定由这八名成员组成新团队。

核心团队 Core.13 于 6 月 12 日上任，并在 6 月 21 日与核心团队 Core.12 进行了交接会议。

项目感谢即将卸任的核心团队 Core.12 成员在过去两年中的服务：

- Baptiste Daroussin（bapt@）
- Benedict Reuschling（bcr@）
- Ed Maste（emaste@）
- Greg Lehey（grog@）
- John Baldwin（jhb@）
- Emmanuel Vadot（manu@）
- Mateusz Piotrowski（0mp@）

#### 提交权限

- 核心团队批准了 Osama Abboud（osamaabb@）的 src 提交权限
- 核心团队重新激活了 Ryan Libby（rlibby@）的 src 提交权限

### FreeBSD 基金会

链接:

[FreeBSD 基金会](https://freebsdfoundation.org/) URL: [https://freebsdfoundation.org/](https://freebsdfoundation.org/)

[技术路线图](https://freebsdfoundation.org/blog/technology-roadmap/) URL: [https://freebsdfoundation.org/blog/technology-roadmap/](https://freebsdfoundation.org/blog/technology-roadmap/)

[捐赠](https://freebsdfoundation.org/donate/) URL: [https://freebsdfoundation.org/donate/](https://freebsdfoundation.org/donate/)

[基金会合作伙伴计划](https://freebsdfoundation.org/our-donors/freebsd-foundation-partnership-program/) URL: [https://freebsdfoundation.org/our-donors/freebsd-foundation-partnership-program/](https://freebsdfoundation.org/our-donors/freebsd-foundation-partnership-program/)

[FreeBSD 杂志](https://freebsdfoundation.org/journal/) URL: [https://freebsdfoundation.org/journal/](https://freebsdfoundation.org/journal/)

[基金会活动](https://freebsdfoundation.org/our-work/events/) URL: [https://freebsdfoundation.org/our-work/events/](https://freebsdfoundation.org/our-work/events/)

联系方式: Deb Goodkin <deb@FreeBSDFoundation.org>

FreeBSD 基金会是一家 501(c)(3)非营利组织，致力于支持和推广 FreeBSD 项目及全球社区，并推动 FreeBSD 的发展。我们通过技术和非技术的方式来实现这一目标。我们的资金 100%来自个人和公司的捐赠，这些投资帮助我们资助：

- 软件开发项目，以在 FreeBSD 中实现功能和特性
- 赞助和组织会议及开发者峰会，提供协作机会并推广 FreeBSD
- 购买和支持硬件，以改善和维护 FreeBSD 基础设施
- 提供资源以改进安全性、质量保证和持续集成工作
- 所需的材料和人员，以推广、教育和倡导 FreeBSD
- 商业供应商与 FreeBSD 开发者之间的合作
- 代表 FreeBSD 项目执行合同、许可协议和其他需要认可法律实体的法律安排

上个季度我们帮助 FreeBSD 庆祝了它的 31 周年！这个社区非常喜欢庆祝这样的里程碑事件。我们不仅看到越来越多的用户在社交媒体上分享他们的故事，许多商业用户也积极推广他们的用例并表达对 FreeBSD 的热爱。看到这个项目通过 FreeBSD 的改进以及用户和贡献者的增加而不断成长，令人兴奋。

在过去的几个季度里，我们建立了技术、宣传和合作团队，以加快我们在改进操作系统、增加 FreeBSD 的采用和知名度以及增加帮助资助我们工作的合作伙伴数量方面的工作。

下面你会看到每个团队的更新，以了解我们为支持你们——我们所爱的社区和操作系统——所完成的工作。但首先，我想分享一个筹款更新。上个季度我们筹集了 41,154 美元，目标是筹集超过 2,000,000 美元。你可以在这里查看我们 2024 年的预算，了解我们是如何使用你的捐款的：[https://freebsdfoundation.org/wp-content/uploads/2024/03/Budget2024-Approved-Public.pdf](https://freebsdfoundation.org/wp-content/uploads/2024/03/Budget2024-Approved-Public.pdf)。

超过一半的预算直接用于改进和保护 FreeBSD。如果存在安全漏洞，我们的工作人员可以迅速介入，评估情况，并在需要时进行更改或解决方案。我们有一名全职开发人员领导持续集成工作，并研究改进测试代码的工具、增加测试覆盖率并帮助开发人员提高效率的方式。我们还为宣传工作分配了更多的资金。这包括创建内容以突出 FreeBSD 的优势和差异点，采访商业用户并记录他们的用例，以及推广你们所做的工作。

请考虑通过捐款来资助我们的工作，以帮助保持 FreeBSD 的创新性、安全性和稳定性： [https://freebsdfoundation.org/donate/](https://freebsdfoundation.org/donate/)。

如果你是公司用户，请考虑成为合作伙伴！在这里了解更多关于我们合作机会的信息：[https://freebsdfoundation.org/our-donors/freebsd-foundation-partnership-program/](https://freebsdfoundation.org/our-donors/freebsd-foundation-partnership-program/)。

#### 操作系统改进

在 2024 年第二季度，FreeBSD 基金会被认定为赞助商的提交有 204 个 src、50 个 ports 和 11 个 doc 树提交。

基金会正在资助 13 个项目。

- [Christos Margiolis](mailto:christos@FreeBSD.org) 继续改进 FreeBSD 的音频栈，并为音频开发者提供有用的工具和框架，以促进在 FreeBSD 上的音频开发。详情请参阅[音频栈改进](https://www.freebsd.org/status/report-2024-04-2024-06/#_audio_stack_improvements)条目。
- [Pawel Dawidek](mailto:pjd@FreeBSD.org) 正处于为 OpenZFS 添加分层速率限制项目的最后阶段。详情请参阅[OpenZFS 的分层速率限制](https://www.freebsd.org/status/report-2024-04-2024-06/#_hierarchical_rate_limits_for_openzfs)报告条目和[OpenZFS 仓库中的拉取请求](https://github.com/openzfs/zfs/pull/16205)。
- 长期合同工[Olivier Certner](mailto:olce@FreeBSD.org) 在树的几个不同部分中活跃：
  - [rtprio(2)](https://man.freebsd.org/cgi/man.cgi?query=rtprio&sektion=2&format=html)：将每个运行队列的队列数从 64 更新到 256
  - UnionFS: 审查了[Jason A. Harmening](mailto:jah@FreeBSD.org)的工作。Jason 的工作修复了许多锁定问题（没有锁的野访问、死锁等），尤其是在 unionfs_rename()中，并改进了锁定逻辑。
  - Vnode 回收/ZFS ARC 回收：审查了[bug #275594](https://bugs.freebsd.org/bugzilla/show_bug.cgi?id=275594)的修复，联系了上游以获得和测试一个回溯，发布并应用了 EN 作为 13.3-RELEASE-p2，并开始了改进 Vnode 回收机制并让 ZFS 传递正确信息的长期工作。
  - ULE 调度器：更新以在单个运行队列上工作，而不是 3 个，以符合 POSIX 关于不同 SCHED_FIFO/SCHED_RR 优先级数量的规定。
  - 杂项：许多（26 个）审查、ports 更新和调查 DRM 问题。
  - 在 FreeBSD 杂志上发表了[EuroBSDCon 2023 会议报告](https://freebsdfoundation.org/eurobsdcon-2023/)。
- [Pierre Pronchery](mailto:pierre@freebsdfoundation.org) 继续在基金会支持下进行一个以安全为中心的项目，其中包括：
  - 从[VuXML](https://vuxml.freebsd.org/freebsd/index.html)到[OSV](https://ossf.github.io/osv-schema/)的转换工具的工作
  - 使用[security/osv-scanner](https://www.freshports.org/security/osv-scanner/)自动生成所有 ports 的 VuXML 报告
  - 围绕 bhyve 运行 Coverity Scan 报告并协助修正报告的缺陷
- 与高级微设备（AMD）和 FreeBSD 基金会的联合项目继续进行，以开发一个完整的 FreeBSD AMD IOMMU 驱动程序。该工作将使 FreeBSD 能够完全支持超过 256 个核心，并具备如 CPU 映射等功能，还将包括 bhyve 集成。[Konstantin Belousov](mailto:kib@FreeBSD.org) 一直在项目的各个部分工作，包括驱动程序附件、寄存器定义、ACPI 表解析器和实用函数。需要完成的两个关键组件是上下文处理（主要是 Intel DMAR 代码的泛化）和页表创建。完成后，可以开启 AMD 驱动程序的启用位进行测试。要跟踪 Konstantin 的所有工作，请查找标有 Advanced Micro Devices（AMD）和 FreeBSD 基金会赞助字段的 src 提交。
- 向量数据包处理器（VPP）是一个开源的高性能用户空间网络栈，提供快速的数据包处理，适用于软件定义网络和网络功能虚拟化应用。[Tom Jones](mailto:thj@FreeBSD.org) 正在完成一个项目的部分工作，即将 VPP 移植到 FreeBSD。代码已与 RG Nets（该工作的共同赞助商）共享，以进行广泛的测试。
- [Björn Zeeb](mailto:bz@FreeBSD.org) 继续改进 FreeBSD 上的无线网络。如同上个季度一样，主要集中在错误修复和稳定性改进。Bjoern

#### 宣传

在 2024 年第二季度，我们继续努力提升对 FreeBSD 项目的关注，倡导项目的发展，展示用户，并为 FreeBSD 社区带来教育内容。以下是我们的一些努力成果：

- 组织了[2024 年 5 月的 FreeBSD 开发者峰会](https://freebsdfoundation.org/news-and-events/event-calendar/may-2024-freebsd-developer-summit/)，该峰会与[BSDCan](https://www.bsdcan.org/2024/)同时举办。可以观看峰会的视频并阅读[总结](https://freebsdfoundation.org/blog/highlights-from-the-freebsd-developer-summit-2024-innovations-and-future-directions/)。
- 在[FreeBSD 周](https://freebsdfoundation.org/freebsd-day/)庆祝 FreeBSD 的 31 岁生日，期间发布了许多新用户故事，并对 Beastie 进行了采访！
- 发布了 2024 年 FreeBSD 社区调查的[最终报告](https://freebsdfoundation.org/blog/results-from-the-2024-freebsd-community-survey-report/)。
- 公布了首届年度[数字安全设计(DSbD)生态系统灯塔奖](https://www.globenewswire.com/news-release/2024/04/03/2856691/0/en/FreeBSD-Foundation-and-Digital-Security-by-Design-DSbD-Announce-Beacon-Award-Winners-for-Innovations-and-Improvements-to-CheriBSD.html)的获奖者，以表彰在[CheriBSD](https://www.globenewswire.com/Tracker?data=AqFv3m-G_PnXTakUHpA34riXXjhMCVgNSpwO99D5k4M7kT-0a6VExR0Fquv5oEcrgKs63RvmsH216VVudEa37mjZdDlZM2T-ySeVWUkJRMAgwt8-gc8RTgGWqjEd69fkAd0jDAYhTBzYItmcGkUkdgJvw-XOeoIGU1F-cb4Vn7yoefproJMVamLYOH5wJJfh1cD-65ey2Acl3WmtVfwInQ==)上进行创新和增强的贡献者。该奖项由基金会与 Innovate UK 和数字安全设计(DSbD)合作赞助。
- 提供了[FreeBSD 14.1](https://freebsdfoundation.org/blog/freebsd-14-1-whats-new-and-how-did-we-get-here/)的概述。
- 更新了[FreeBSD 终端用户页面](https://freebsdfoundation.org/end-user-stories/)，加入了新的采访和一些新的案例研究，包括[Netflix](https://freebsdfoundation.org/netflix-case-study/)、[Metify](https://freebsdfoundation.org/end-user-stories/metify-case-study/)和[RGNets](https://freebsdfoundation.org/end-user-stories/rg-nets-case-study/)的案例研究。
- 发表了许多博客文章，包括：
  - [FreeBSD 基金会发布 V1 版 FreeBSD SSDF 认证以支持网络安全合规](https://freebsdfoundation.org/blog/freebsd-foundation-delivers-v1-of-freebsd-ssdf-attestation-to-support-cybersecurity-compliance/)
  - [FreeBSD：原始操作系统分发的火炬手](https://freebsdfoundation.org/blog/freebsd-the-torchbearer-of-the-original-operating-system-distribution/)
  - [2024 年 FreeBSD 基金会预算之旅：选择我们的投资方向](https://freebsdfoundation.org/blog/the-2024-freebsd-foundation-budget-journey-choosing-where-we-invest/)
  - [为什么 FreeBSD 持续创新并蓬勃发展](https://freebsdfoundation.org/blog/why-freebsd-continues-to-innovate-and-thrive/)
  - [创新未来：Arm 战略性拥抱 FreeBSD](https://freebsdfoundation.org/blog/innovating-the-future-arms-strategic-embrace-of-freebsd/)
  - [为什么 FreeBSD 活动对推动 FreeBSD 的发展至关重要](https://freebsdfoundation.org/blog/why-freebsd-events-are-important-to-furthering-the-development-of-freebsd/)

- 参与了以下撰稿文章、采访和播客：

  - [CIO Influence 采访 Deb Goodkin](https://cioinfluence.com/technology/operating-systems/cio-influence-interview-with-deb-goodkin-director-of-freebsd-foundation/)
  - [SustainOSS 播客采访 Deb Goodkin](https://podcast.sustainoss.org/239)

#### 法律/FreeBSD 知识产权

基金会拥有 FreeBSD 商标，并有责任保护这些商标。我们还为核心团队提供法律支持，以便调查出现的问题。

访问[https://freebsdfoundation.org](https://freebsdfoundation.org/)了解我们如何支持 FreeBSD 以及我们如何帮助你！



### FreeBSD 发布工程团队

链接：

[FreeBSD 14.1-RELEASE 公告](https://www.freebsd.org/releases/14.1R/announce/) URL: [https://www.freebsd.org/releases/14.1R/announce/](https://www.freebsd.org/releases/14.1R/announce/)

[FreeBSD 13.4-RELEASE 计划](https://www.freebsd.org/releases/13.4R/schedule/) URL: [https://www.freebsd.org/releases/13.4R/schedule/](https://www.freebsd.org/releases/13.4R/schedule/)

[FreeBSD 版本](https://download.freebsd.org/releases/ISO-IMAGES/) URL: [https://download.freebsd.org/releases/ISO-IMAGES/](https://download.freebsd.org/releases/ISO-IMAGES/)

[FreeBSD 开发快照](https://download.freebsd.org/snapshots/ISO-IMAGES/) URL: [https://download.freebsd.org/snapshots/ISO-IMAGES/](https://download.freebsd.org/snapshots/ISO-IMAGES/)

联系：FreeBSD 发布工程团队，<re@FreeBSD.org>

FreeBSD 发布工程团队负责设定和发布 FreeBSD 正式项目版本的发布时间表，宣布代码冻结并维护相应的分支等工作。

团队悼念 Mike Karels 的逝世，他是副发布工程负责人，并在去世前几天同意担任 13.4-RELEASE 的发布工程师。

团队管理了 14.1-RELEASE，并在 6 月完成了最终发布构建和公告。在今年第二季度，团队新增了成员：Ed Maste（副发布工程负责人）、Dave Cottlehuber、John Hixson、Mahdi Mokhtari、Doug Rabson、Muhammad Moinur Rahman。13.4-RELEASE 周期的规划已经开始。

发布工程团队继续为**main**、**stable/14**和**stable/13**分支提供每周开发快照构建。


### 集群管理团队

链接：

[集群管理团队成员](https://www.freebsd.org/administration/#t-clusteradm) URL: [https://www.freebsd.org/administration/#t-clusteradm](https://www.freebsd.org/administration/#t-clusteradm)

联系：集群管理团队 <clusteradm@FreeBSD.org>

FreeBSD 集群管理团队成员负责管理项目依赖的机器，以便同步其分布式工作和通信。

本季度，团队完成了以下工作：

- 定期支持 FreeBSD.org 用户账户。
- 为所有物理主机和镜像提供定期的磁盘和部件支持（和更换）。
- 集群软件更新。
- 将集群服务迁移到芝加哥。

#### 集群软件更新

除软件包构建器和面向开发者的“dogfood”机器外，FreeBSD 集群大多跟踪 stable/X 分支。本季度，我们开始将 stable/13 主机迁移到 stable/14。

在撰写本文时，集群中有 133 台物理机器，48 台运行 current，64 台已升级到 stable/14。剩余的机器将在不久的将来升级或退役。在集群的 290 个 jail 中，有 206 个运行 stable/14。

```sh
 12.x: Regular   2, Jails   8
 13.x: Regular  19, Jails  68
 14.x: Regular  64, Jails 206
>15.x: Regular  48, Jails   8
--
Total: Regular 133, Jails 290
Total installations:      423
Running -RELEASE|{-p*}:    0
Total geographic sites:    16
```

#### 将集群服务迁移到芝加哥

今年早些时候，我们开始在芝加哥建立新站点。本季度，我们开始退役新泽西的旧机器，并将服务迁移到芝加哥的新机器。我们的长期目标是使芝加哥成为我们的主要站点。完成此工作还需数月时间。

#### FreeBSD 官方镜像概览

目前的镜像服务器分布在以下地点：澳大利亚、巴西、德国、日本（两个完整镜像站点）、马来西亚、南非、瑞典、台湾、英国（完整镜像站点）、美国加利福尼亚州、芝加哥、新泽西（主站点）和华盛顿。

硬件和网络连接由以下组织慷慨提供：

- [BroadBand Tower, Inc.](https://www.bbtower.co.jp/en/corporate/) 的云和 SDN 实验室
- [国立阳明交通大学计算机科学系](https://www.cs.nycu.edu.tw/)
- [Equinix](https://deploy.equinix.com/)
- [澳大利亚互联网协会](https://internet.asn.au/)
- [Internet Systems Consortium](https://www.isc.org/)
- [INX-ZA](https://www.inx.net.za/)
- [KDDI Web Communications Inc.](https://www.kddi-webcommunications.co.jp/english/)
- [马来西亚研究与教育网络](https://www.mohe.gov.my/en/services/research/myren)
- [MetaPeer](https://www.metapeer.com/)
- [New York Internet](https://www.nyi.net/)
- [NIC.br](https://nic.br/)
- [Teleservice Skåne AB](https://www.teleservice.net/)
- [Your.Org](https://your.org/)

我们始终欢迎新的官方镜像加入。我们注意到在全球的互联网交换点托管单一镜像服务器的好处，例如我们在澳大利亚、巴西和南非的现有镜像。如果您与有意愿赞助单一镜像服务器的组织有联系，或知道这样的组织，请联系我们。我们特别关注美国西海岸和整个欧洲的地点。

查看[通用镜像布局](https://wiki.freebsd.org/Teams/clusteradm/generic-mirror-layout)以获取完整镜像站点规格，以及[tiny-mirror](https://wiki.freebsd.org/Teams/clusteradm/tiny-mirror)以了解单一镜像站点。

赞助商：FreeBSD 基金会和 Netzkommune


### 持续集成

链接：

[FreeBSD Jenkins 实例](https://ci.freebsd.org/)  

[FreeBSD CI Tinderbox 视图](https://tinderbox.freebsd.org/)  

[FreeBSD CI 工件存档](https://artifact.ci.freebsd.org/)  

[托管 CI 维基](https://wiki.freebsd.org/HostedCI)  

[第三方软件 CI](https://wiki.freebsd.org/3rdPartySoftwareCI)  

[与 freebsd-testing@ 相关的票据](https://bugs.freebsd.org/bugzilla/buglist.cgi?bug_status=%3Cem%3Eopen%3C/em%3E&email1=testing%40FreeBSD.org&emailassigned_to1=1&emailcc1=1&emailtype1=equals)  

[FreeBSD CI 仓库](https://github.com/freebsd/freebsd-ci)  

[dev-ci 邮件列表](https://lists.freebsd.org/subscription/dev-ci)

联系：Jenkins 管理员 <jenkins-admin@FreeBSD.org>  

联系：Li-Wen Hsu <lwhsu@FreeBSD.org>  

联系：[freebsd-testing 邮件列表](https://lists.freebsd.org/mailman/listinfo/freebsd-testing)  

联系：EFNet 上的 IRC #freebsd-ci 频道

在 2024 年第二季度，我们与项目贡献者和开发人员合作，满足他们的测试需求。同时，我们与外部项目和公司合作，通过更多地在 FreeBSD 上进行测试来改进他们的产品。

已完成的重要任务：

- 在芝加哥站点添加了 FreeBSD 基金会购买的新硬件至 CI 集群
- 将退役的 pkg 构建器重新利用为构建代理并添加到 CI 集群
- 根据机器能力调整了作业调度机制
- bofh@ 合并了 [https://reviews.freebsd.org/D43786](https://reviews.freebsd.org/D43786) 作为 [为开发者添加初步的树内 CI 基础设施](https://cgit.freebsd.org/src/commit/?id=cb9d4bb1fbb9ac0eb9f211656e91f9d5254c166c)，以便他们可以复制类似于 [https://ci.FreeBSD.org](https://ci.freebsd.org/) 的环境或结果
- 退役了 main 分支的 armv6 作业

进行中的任务：

- 合并 [使用 CIRRUS-CI 进行预提交 CI](https://reviews.freebsd.org/D36257)
- 设计和实施基于 CI 的构建和测试以及拉取/合并请求系统（以支持 [工作流程工作组](https://gitlab.com/bsdimp/freebsd-workflow)）
- 概念验证系统正在进行中。
- 设计和实施使用 CI 集群构建发布工件，如发布工程所做的那样，从快照构建开始
- 简化贡献者和开发人员设置 CI/测试环境的流程
- 设置 CI 阶段环境并将实验性作业置于其上
- 重新设计硬件测试实验室并添加更多测试硬件

开放或排队的任务：

- 收集和整理 [CI 任务和想法](https://hackmd.io/@FreeBSD-CI/freebsd-ci-todo)
- 为运行测试的 VM 客户端设置公共网络访问
- 实现使用裸金属硬件运行测试套件
- 添加针对 -CURRENT 的 drm  Port 构建测试
- 计划运行 ztest 测试
- 帮助更多软件在其 CI 管道中获得 FreeBSD 支持（维基页面：[3rdPartySoftwareCI](https://wiki.freebsd.org/3rdPartySoftwareCI)，[HostedCI](https://wiki.freebsd.org/HostedCI)）
- 与托管 CI 提供商合作以更好地支持 FreeBSD

请参阅 [与 freebsd-testing@ 相关的票据](https://bugs.freebsd.org/bugzilla/buglist.cgi?bug_status=%3Cem%3Eopen%3C/em%3E&email1=testing%40FreeBSD.org&emailassigned_to1=1&emailcc1=1&emailtype1=equals) 了解更多进行中的信息，并不要犹豫加入这个工作！

赞助商：FreeBSD 基金会

### Ports Collection

链接：

- [关于 FreeBSD Ports](https://ports.freebsd.org/)
- [为 Ports 做贡献](https://docs.freebsd.org/en/articles/contributing/#ports-contributing)
- [Ports 管理团队](https://www.freebsd.org/portmgr/)
- [Ports 压缩包](http://ftp.freebsd.org/pub/FreeBSD/ports/ports/)

联系人：

- Tobias C. Berner <portmgr-secretary@FreeBSD.org>
- FreeBSD Ports 管理团队 \<[portmgr@FreeBSD.org](mailto:portmgr@FreeBSD.org)\>

Ports 管理团队负责监督 Ports 树的整体方向、构建软件包以及人员管理等事项。以下是上季度发生的情况。

根据 INDEX，目前 Ports 集合中共有 32,471 个 ports。目前大约有 3,497 个开放的 ports PRs。上季度在主分支上有 160 位提交者进行了 10,525 次提交，在 2024Q2 分支上有 107 位提交者进行了 1,771 次提交。与上一季度相比，主分支的提交数量大幅减少（从 12,991 次减少），对季度分支的回溯也减少（相比 888 次）。ports 数量则有所增加（从 32,244 增加）。

最活跃的主分支提交者是：

- sunpoet: 3739 次提交
- yuri: 1450 次提交
- jbeich: 491 次提交
- eduardo: 220 次提交
- bofh: 200 次提交
- diizzy: 197 次提交
- rene: 188 次提交
- fernape: 156 次提交
- jhale: 133 次提交
- arrowd: 129 次提交

在过去三个季度中，ports 树中发生了很多变化，以下是一些主要软件的升级情况：

- pkg 升级到 1.21.3
- lazarus 的默认版本切换到 3.4.0
- fpc 的默认版本切换到 3.2.3
- python 的默认版本切换到 3.11
- chromium 从 123.0.6312.86 升级到 126.0.6478.126
- firefox 从 124.0.1 升级到 127.0.2
- firefox-esr 从 115.9.0 升级到 115.12.1
- rust 从 1.77.0 升级到 1.79.0
- sdl2 从 2.6.3 升级到 2.8.2
- wlroots 从 0.17.2 升级到 0.17.4
- wine 从 8.0.2 升级到 9.0
- wine-devel 从 9.4 升级到 9.11
- xorg-server 从 21.1.11 升级到 21.1.13
- qt5 从 5.15.13 升级到 5.15.14
- qt6 从 6.6.3 升级到 6.7.2
- kf5 从 5.115.0 升级到 5.116.0
- kf6 从 6.0.0 升级到 6.3.0
- plasma6 从 6.0.2 升级到 6.1.1

在上季度，pkgmgr@ 进行了 24 次实验运行，以测试各种 ports 升级、ports 默认版本更新、子包支持和基础系统变化。



## 项目

这些项目涵盖了多个类别，从内核和用户空间到 Ports 集合或外部项目。

### 音频栈改进

联系人：Christos Margiolis <christos@FreeBSD.org>

FreeBSD 的音频栈是一个不太受关注和开发的领域，虽然其质量较高，但仍有改进空间——从缺乏音频开发框架，到缺少用户空间实用程序和内核驱动相关的错误。这个项目旨在触及这些领域，因此更多的是一个一般改进项目，而不是特定功能的实现。

自[上次报告](https://www.freebsd.org/status/report-2024-01-2024-03/#_audio_stack_improvements)以来的重要工作：

- [现在可以实现](https://cgit.freebsd.org/src/commit/?id=44e128fe9d92c1a544b801cb56e907a66ef34691)异步音频设备分离。此功能已随 FreeBSD 14.1-RELEASE 以及 14-STABLE 版本发布。
- 移除了[sound(4)](https://man.freebsd.org/cgi/man.cgi?query=sound&sektion=4&format=html)中使用的“snd_clone”设备克隆框架，改用 DEVFS_CDEVPRIV(9)。有关行为更改的详细信息，请参阅[提交说明](https://cgit.freebsd.org/src/commit/?id=e8c0d15a64fadb4a330f2da7244becaac161bb70)。此功能也已随 14.1-RELEASE 以及 14-STABLE 版本发布。
- 修复了多个[sound(4)](https://man.freebsd.org/cgi/man.cgi?query=sound&sektion=4&format=html)的崩溃和错误。
- 增强了[snd_hda(4)](https://man.freebsd.org/cgi/man.cgi?query=snd_hda&sektion=4&format=html)笔记本音频的即开即用支持。
- 一系列提交清理并简化了[sound(4)](https://man.freebsd.org/cgi/man.cgi?query=sound&sektion=4&format=html)的部分内容。
- 对 OSS API 进行了多项修复，最值得注意的是[SNDCTL_AUDIOINFO 和 SNDCTL_ENGINEINFO IOCTLs 的正确实现](https://cgit.freebsd.org/src/commit/?id=e07f9178502b7cbc0769fc10e99ad0d013f437fd)。
- 开始实现[音频(3)](https://man.freebsd.org/cgi/man.cgi?query=audio&sektion=3&format=html)，一个 OSS 音频和 MIDI 库。
- 接管了[virtual_oss(8)](https://man.freebsd.org/cgi/man.cgi?query=virtual_oss&sektion=8&format=html)的维护。

未来的工作包括：

- 实现[音频(8)](https://man.freebsd.org/cgi/man.cgi?query=audio&sektion=8&format=html)实用程序，类似于[mixer(8)](https://man.freebsd.org/cgi/man.cgi?query=mixer&sektion=8&format=html)。
- 实现一个蓝牙设备管理实用程序。
- 改进[mixer(3)](https://man.freebsd.org/cgi/man.cgi?query=mixer&sektion=3&format=html)和[mixer(8)](https://man.freebsd.org/cgi/man.cgi?query=mixer&sektion=8&format=html)。
- 在需要的地方改进文档和测试套件。
- 尝试找到一种更好的（理想情况下是自动化的）方式来处理[snd_hda(4)](https://man.freebsd.org/cgi/man.cgi?query=snd_hda&sektion=4&format=html)引脚修补。这个实验性尝试可能不会得到实际的工作结果。

您还可以在[freebsd-multimedia@](https://lists.freebsd.org/subscription/freebsd-multimedia)中跟踪开发进程，我会在那里发布定期报告。

赞助：The FreeBSD Foundation

### FreeBSD GitHub Pull Request 报告

链接:

[GitHub 工作组 wiki 页面](https://wiki.freebsd.org/WorkingGroup/Github) URL: [https://wiki.freebsd.org/WorkingGroup/GitHub](https://wiki.freebsd.org/WorkingGroup/GitHub)

[FreeBSD 基础系统 Pull Requests](https://github.com/freebsd/freebsd-src/pulls) URL: [https://github.com/freebsd/freebsd-src/pulls](https://github.com/freebsd/freebsd-src/pulls)

联系人: Warner Losh <imp@FreeBSD.org>

FreeBSD 项目一直在尝试通过 GitHub Pull Request 接受贡献。在过去的一年里，我们从中学到了很多东西，并制定了一些与 Pull Request 相关的规则。总体来说，Pull Request 应该仅针对用户可见的内容、对项目有增值作用并且已准备就绪的改动，当然最终审核除外。

当前状态:

- 我们能够通过手动处理每周至少一次来跟上 Pull Request 的进度。
- 我们发现手动处理过程繁琐且容易出错。
- 我们可以在测试分支中分阶段处理多个 Pull Request，以便批量进行测试。
- 我们可以自动合并结果，以便在 GitHub 基础设施中显示 Pull Request 已被合并。

我们需要在以下方面的帮助来自动化处理流程:

- 添加上下文相关的自动化测试（例如，对 man 页进行 igor 测试）。
- 添加能够测试启动生成镜像的构建/安装测试。
- 将常见任务（如 man 页的修正）自动化到阶段性处理过程中。
- 为一级架构的阶段性分支添加简单的冒烟测试。
- 研究是否可以选择性地集成 Jenkins 测试，以扩大我们可以接受的变更规模。
- 与 Bugzilla 问题报告和 Phabricator 评审进行集成。
- 通过自动化对 Pull Request 中常见错误的反馈来改善提交者在 GitHub 上的体验。
- 创建提交者清单以减少错误。
- 提供关于 Pull Request 的更好报告，尤其是频繁贡献优质 Pull Request 的贡献者。

我们正在 FreeBSD 的 Discord 服务器上的 #github-hacking 频道协调工作。欢迎加入我们来贡献力量，或仅仅是聊聊项目。

一旦一切都调整好，我们希望能通过宣传来引导贡献者，至少在基础系统方面，使用 GitHub Pull Request。我们需要更多开发人员来审查 FreeBSD 的 GitHub Pull Request。一旦自动化成熟并全面展开，我们还将需要更多开发人员来审查和合并 Pull Request。我们真诚希望通过这一努力，能够改善 FreeBSD 的贡献体验，并从社区获得有用的修复。



## 用户空间

影响基础系统及其程序的更改。

### Capsicum-rs

链接:

[capsicum-rs 在 GitHub 上](https://github.com/dlrobertson/capsicum-rs) 

URL: [https://github.com/dlrobertson/capsicum-rs](https://github.com/dlrobertson/capsicum-rs) [capsicum-net 在 GitHub 上](https://github.com/asomers/capsicum-net) 

URL: [https://github.com/asomers/capsicum-net](https://github.com/asomers/capsicum-net)

联系人: Alan Somers <asomers@FreeBSD.org>

Capsicum 是一个轻量级的操作系统能力和沙箱框架，实施了混合能力系统模型。

我已接管了为 Capsicum 提供 Rust 绑定的库，并扩展了对 [libcasper(3)](https://man.freebsd.org/cgi/man.cgi?query=libcasper&sektion=3&format=html) 和 [cap_net(3)](https://man.freebsd.org/cgi/man.cgi?query=cap_net&sektion=3&format=html) 的支持。这个库已经在 [net-mgmt/nfs-exporter](https://cgit.freebsd.org/ports/tree/net-mgmt/nfs-exporter/) 和一个支持 TLS 的 FTP 服务器中使用了（该 FTP 服务器是闭源的，但所有有趣的部分都位于开源库中，可以在 [https://github.com/bolcom/libunftp/tree/master/crates/unftp-sbe-fs/examples](https://github.com/bolcom/libunftp/tree/master/crates/unftp-sbe-fs/examples) 找到一个示例服务器）。

赞助商: Axcient

### 服务 jail  —  自动将 rc.d 服务放入 jail

链接:

[Service Jails rc-article 部分](https://docs.freebsd.org/en/articles/rc-scripting/#rcng-service-jails) URL: [https://docs.freebsd.org/en/articles/rc-scripting/#rcng-service-jails](https://docs.freebsd.org/en/articles/rc-scripting/#rcng-service-jails)

联系人: Alexander Leidinger <netchild@FreeBSD.org>

服务 jail 扩展了 [rc(8)](https://man.freebsd.org/cgi/man.cgi?query=rc&sektion=8&format=html) 系统，使其能够自动将 rc.d 服务放入 jail 。服务 jail 继承了父主机或 jail 的文件系统，但默认情况下使用 jail 的所有其他限制（进程可见性、受限网络访问、文件系统挂载权限、sysvipc 等）。额外配置允许继承父主机的 IP、sysvipc、内存页面锁定以及使用 bhyve 虚拟机监视器 ([vmm(4)](https://man.freebsd.org/cgi/man.cgi?query=vmm&sektion=4&format=html))。

基础系统基础设施和基础系统 rc.d 服务已提交到 15-current，手册 / rc 文章更新已提交到文档中。下一步是扩展 ports 集合中的服务，使其能够利用这一功能。

如果你想将例如 nginx 放入服务 jail 并允许 IPv4 和 IPv6 访问，只需将 [rc.conf(5)](https://man.freebsd.org/cgi/man.cgi?query=rc.conf&sektion=5&format=html) 更改为:

```
nginx_svcj_options=net_basic
nginx_svcj=YES
```

尽管这没有独立文件系统和 IP/VNET 的手动 jail 设置那样的安全优势，但它更容易设置，同时提供了一些 jail 的安全性优势，如隐藏同一用户的其他进程。

任何测试和反馈（即使只是“服务 X 在服务 jail 中工作”）都欢迎。



## 内核

内核子系统/功能、驱动支持、文件系统等的更新。

### OpenZFS 的分层速率限制

链接:

[Pull request](https://github.com/openzfs/zfs/pull/16205) URL: [https://github.com/openzfs/zfs/pull/16205](https://github.com/openzfs/zfs/pull/16205)

联系人: Pawel Dawidek <pawel@dawidek.net>

速率限制允许限制每个数据集的带宽和元数据操作的数量。

分层速率限制允许在共享环境中进行精细的资源控制，例如，当单个 ZFS 池为多个独立的虚拟机或 jail 提供数据时。

由于限制是分层的，它们的执行方式类似于配额属性：子数据集必须遵守父数据集的限制。

可以使用六个新属性来配置限制: `limit_bw_read`、`limit_bw_write`、`limit_bw_total`、`limit_op_read`、`limit_op_write`、`limit_op_total` `limit_bw_*` 属性分别限制数据集及其子集可以消耗的读取、写入或总带宽。这些限制以每秒字节数为单位。`limit_op_*` 属性限制数据集及其子集可以生成的读取、写入或总的元数据操作数量。这些限制以每秒操作次数为单位。

这些限制适用于文件系统和 ZFS 卷（及其快照）。

初步工作已经完成，Pull Request 已提交审核。

赞助商: Klara Systems 赞助商: FreeBSD Foundation

### 低成本条件执行机制

链接:

[FreeBSD wiki](https://wiki.freebsd.org/SummerOfCode2024Projects/ZeroCostConditionalExecutionMechanism) URL: [https://wiki.freebsd.org/SummerOfCode2024Projects/ZeroCostConditionalExecutionMechanism](https://wiki.freebsd.org/SummerOfCode2024Projects/ZeroCostConditionalExecutionMechanism)

联系人: Marko Vlaić <mvlaic@freebsd.org> 联系人: Bojan Novković (导师) <bnovkov@freebsd.org>

该项目旨在实现一种低成本的条件执行机制，类似于 Linux 中的 `static_key` 接口。当前的工作名称是 `zcond`，即零成本条件。其目的是减少在性能敏感的内核代码路径中，少用功能的开销。特别是，目标是以下简单结构的代码块：

```sh
if(some_global_flag == true) {
    do_some_additional_task();
}
```

这样的代码块在频繁执行的代码中可能会导致性能开销。

该机制的动机使用案例是跟踪（如 [wiki](https://wiki.freebsd.org/SummerOfCodeIdeas#Unified_kernel_tracing_interface) 中所述），但该项目将识别更多可以应用该机制的领域。

该机制的核心是运行时指令热补丁，使其高度依赖于架构。由于内核指令在运行时被覆盖，因此必须非常注意安全性。更多详细信息和一些实现思路可以在 [项目 wiki 页面](https://wiki.freebsd.org/SummerOfCode2024Projects/ZeroCostConditionalExecutionMechanism) 中找到。随着项目的推进，将会产生更多关于实现和设计决策的文档。

项目的目标是为 x86-64 架构生产出一个可用的机制实现。然后，将其应用于现有的内核代码，并进行基准测试。如果基准测试结果良好，将移植到其他架构。

该项目是 [Google Summer of Code 2024](https://summerofcode.withgoogle.com/) 的一部分。项目仍处于早期阶段，但任何反馈都将受到高度重视。

#### 需要帮助

- 关于机制、API 和实现的一般反馈
- 欢迎提出跟踪以外的更多使用案例
- 代码审查
- 名称建议

赞助商: Google LLC (GSoC 2024)


## 架构

更新平台特定功能，并支持新的硬件平台。

### FreeBSD/riscv64

链接:

[Wiki 主页](https://wiki.freebsd.org/riscv) URL: [https://wiki.freebsd.org/riscv](https://wiki.freebsd.org/riscv)

联系人: Mitchell Horne <mhorne@FreeBSD.org> 

联系人: Ruslan Bukin <br@FreeBSD.org> 

联系人: Jari Sihvola <jsihv@gmx.com>

FreeBSD/RISC-V 项目正在为 [RISC-V 指令集架构](https://riscv.org/) 提供支持。

#### BSDCan 开发者峰会更新

Mitchell 在 6 月的开发者峰会上，作为 BSDCan 2024 的一部分，展示了 FreeBSD/riscv64 平台的状态。演讲讨论了支持不断发展的 RISC-V ISA 的挑战，并简要概述了一些可用的硬件目标。虽然形式较为非正式，但可以在 YouTube 上观看。

[https://www.youtube.com/watch?v=O7zW7Z9U0ns](https://www.youtube.com/watch?v=O7zW7Z9U0ns)

#### StarFive JH7110 SoC / VisionFive v2

正在进行对 FreeBSD 支持 JH7110 RISC-V SoC 的工作。该 SoC 存在于几个现有的 RISC-V 单板计算机中。主要支持目标是 VisionFive v2，但这项工作可能会对类似硬件如 Pine64 Star64 和 Milk-V Mars 有益。

目前，CURRENT 中的支持部分完成。已完成的内容包括:

- UART
- clk/reset 驱动
- MMC/SD

下一个目标是实现以太网支持，这需要对 `if_eqos` 驱动进行扩展。该代码已功能完备，但仍在审查中。

这项工作由 Jari 执行，Mitchell 进行审查、测试和集成。

[https://wiki.freebsd.org/riscv/StarFive](https://wiki.freebsd.org/riscv/StarFive)

#### T-HEAD/XuanTie CPU 支持

如开发者峰会演讲中所述，这些 CPU 存在多个支持障碍。问题主要来自于自定义的供应商扩展：具有自定义缓存管理指令的非一致性设备 I/O，以及自定义（违反规范的）页面基础内存类型实现。这些特殊之处要求对 pmap、busdma 和早期启动代码进行困难且侵入性的更改。

同时，我们看到基于此 IP 的硬件越来越多，因此支持成为一个反复出现的问题和动力。

页面基础内存类型的工作正在进行中，并预计很快会在 CURRENT 中落地。此功能允许为单独的虚拟内存页面分配特定属性，例如缓存要求。riscv64 pmap 已扩展以支持官方的 RISC-V 'Svpbmt' 扩展和 T-HEAD 版本的 PBMT。这些替代编码不兼容，但提供类似的功能。

对设备一致性和缓存管理挑战的工作将在下个季度开始。

希望这些基础工作最终能够支持可用的 RISC-V 硬件，如:

- Allwinner D1 (Nehza)
- Sipeed Lichee Pi 4A
- Beagle-V Ahead
- Milk-V Pioneer

#### RISC-V 虚拟化支持

bhyve/`vmm(4)` 中的 RISC-V 虚拟化实验支持正在积极开发中。目前，单核 VM 是可能的，且访客可以启动到多用户模式。

注意: "H"（虚拟化）扩展未被任何已知的现有或即将出现的 RISC-V 硬件实现。它由软件模拟器如 Spike 或 QEMU 完全支持。

[https://wiki.freebsd.org/riscv/bhyve](https://wiki.freebsd.org/riscv/bhyve)

赞助商: FreeBSD Foundation (mhorne 的工作) 赞助商: UKRI (br 的工作)


## 云计算

更新云特定功能，并支持新的云平台。

### FreeBSD 在 Microsoft HyperV 和 Azure 上

链接:

[FreeBSD wiki 上的 Microsoft Azure 文章](https://wiki.freebsd.org/MicrosoftAzure) URL: [https://wiki.freebsd.org/MicrosoftAzure](https://wiki.freebsd.org/MicrosoftAzure)

[FreeBSD wiki 上的 Microsoft HyperV 文章](https://wiki.freebsd.org/HyperV) URL: [https://wiki.freebsd.org/HyperV](https://wiki.freebsd.org/HyperV)

联系人: Microsoft FreeBSD 集成服务团队 <bsdic@microsoft.com>

联系人: [freebsd-cloud 邮件列表](https://lists.freebsd.org/subscription/freebsd-cloud)

联系人: FreeBSD Azure 发布工程团队 <releng-azure@FreeBSD.org>

联系人: Wei Hu <whu@FreeBSD.org>

联系人: Souradeep Chakrabarti <schakrabarti@microsoft.com>

联系人: Li-Wen Hsu <lwhsu@FreeBSD.org>

在本季度，我们在 Azure Marketplace 上发布了 [14.1-RELEASE](https://azuremarketplace.microsoft.com/marketplace/apps/thefreebsdfoundation.freebsd-14_1)。来自 Microsoft 的 Souradeep Chakrabarti 改进了 Azure 中的 TLB 刷新机制。

进行中的任务：

- 自动化映像构建和发布过程，并合并到 src/release/。
- 将快照构建构建并发布到 [Azure 社区画廊](https://learn.microsoft.com/azure/virtual-machines/share-gallery-community)。
- 测试在 [Azure Pipelines](https://azure.microsoft.com/products/devops/pipelines/) 中添加 FreeBSD 支持
  - [https://github.com/microsoft/azure-pipelines-agent/pull/3266](https://github.com/microsoft/azure-pipelines-agent/pull/3266)

以上任务由 FreeBSD 基金会赞助，Microsoft 提供资源支持。

待办任务：

- 更新 [Microsoft Learn](https://learn.microsoft.com/) 上与 FreeBSD 相关的文档
- 将 [sysutils/azure-agent](https://cgit.freebsd.org/ports/tree/sysutils/azure-agent/) 更新到最新版本
- 上游 [Azure 代理的本地修改](https://github.com/Azure/WALinuxAgent/pull/1892)
- 移植 [Linux 虚拟机扩展](https://github.com/Azure/azure-linux-extensions) 到 Azure

赞助商: Microsoft（为 Microsoft 内部人员）以及其他资源支持
赞助商: FreeBSD 基金会（其他所有事项）


### FreeBSD 上的 OpenStack

链接:

[OpenStack](https://www.openstack.org/) URL: [https://www.openstack.org/](https://www.openstack.org/)

[FreeBSD 上的 OpenStack](https://github.com/openstack-on-freebsd) URL: [https://github.com/openstack-on-freebsd](https://github.com/openstack-on-freebsd)

联系人: Chih-Hsin Chang <starbops@hey.com>

联系人: Li-Wen Hsu <lwhsu@FreeBSD.org>

FreeBSD 上的 OpenStack 项目旨在将 OpenStack 云基础设施与 FreeBSD 操作系统集成，利用 FreeBSD 的独特功能，同时保持与 OpenStack 标准的兼容性。

在 2024 年第二季度，我们显著推进了项目的进展。我们的一项关键活动是参加了 BSDCan 2024，在会上介绍了 [“迈向稳健的基于 FreeBSD 的云：迁移 OpenStack 组件”](https://youtu.be/TUHfTw6OX-8?si=2ramynfxOwa9MgYe)。这次演讲提高了项目的知名度，并吸引了潜在贡献者的关注。

我们将当前的单节点概念验证（POC）站点扩展到了三节点设置。这涉及详细的环境设置和网络规划。此外，我们开始将基础迁移到 FreeBSD 15.0-CURRENT，以确保我们的项目与 FreeBSD 的最新进展保持一致。

我们还开始将手动安装步骤和代码补丁转化为 FreeBSD ports，以简化未来用户的安装过程。另一个重大里程碑是启动了在 FreeBSD 实例和 OpenStack Ironic 的服务主机上进行裸机供应的工作。

展望下个季度，我们将专注于完善这些进展，并进一步增强项目的稳健性和易用性。特别是，我们计划将 OpenStack 组件从 Xena 版本升级到更新版本，因为 Xena 已进入“未维护”阶段，并将很快达到 EOL。我们欢迎社区的建议和贡献，以帮助我们实现目标。

赞助商: FreeBSD 基金会

## 文档

文档树、手册页或新外部书籍/文档中的重要变更。

### 文档工程团队

链接: [FreeBSD 文档项目](https://www.freebsd.org/docproj/) URL: [https://www.freebsd.org/docproj/url](https://www.freebsd.org/docproj/url)

链接: [FreeBSD 文档项目新贡献者入门指南](https://docs.freebsd.org/en/books/fdp-primer/) URL: [https://docs.freebsd.org/en/books/fdp-primer/url](https://docs.freebsd.org/en/books/fdp-primer/url)

链接: [文档工程团队](https://www.freebsd.org/administration/#t-doceng) URL: [https://www.freebsd.org/administration/#t-docengurl](https://www.freebsd.org/administration/#t-docengurl)

联系人: FreeBSD Doceng 团队 <doceng@FreeBSD.org>

doceng@ 团队处理与 FreeBSD 文档项目相关的一些元项目问题；更多信息请参见 [FreeBSD Doceng 团队章程](https://www.freebsd.org/internal/doceng/)。

#### 文档变更

在本季度，文档的多个部分得到了更新，包括删除了对从 ports 树中移除的 ports 的提及、修正了错别字、更新了 URL 以及改进了 asciidoc。

以下是本季度的三个突出贡献：

- 记录了与供应商导入相关的最佳实践。URL: [https://cgit.freebsd.org/doc/commit/?id=fe494e72df138266f6da2b9170cf0215275a6aaf](https://cgit.freebsd.org/doc/commit/?id=fe494e72df138266f6da2b9170cf0215275a6aaf)
- 向手册中添加了关于服务 jail 的部分。URL: [https://cgit.freebsd.org/doc/commit/?id=8f4754a9a6ee8f2503cfb68d14afa99b17729e7f](https://cgit.freebsd.org/doc/commit/?id=8f4754a9a6ee8f2503cfb68d14afa99b17729e7f)
- 改进了 bhyve 的文档。URL: [https://cgit.freebsd.org/doc/commit/?id=68cbd16c4e7c199cfdfb2b54110ad1470b4d7a2e](https://cgit.freebsd.org/doc/commit/?id=68cbd16c4e7c199cfdfb2b54110ad1470b4d7a2e)

#### FreeBSD 在 Weblate 上的翻译

链接: [在 Weblate 上翻译 FreeBSD](https://wiki.freebsd.org/Doc/Translation/Weblate) URL: [https://wiki.freebsd.org/Doc/Translation/Weblateurl](https://wiki.freebsd.org/Doc/Translation/Weblateurl)

链接: [FreeBSD Weblate 实例](https://translate-dev.freebsd.org/) URL: [https://translate-dev.freebsd.org/url](https://translate-dev.freebsd.org/url)

##### 2024 年第二季度状态

- 17 个团队语言
- 214 名注册用户

9 名新翻译者加入了 Weblate：

- BFR (de_DE)
- Elwood (de_DE)
- Freebsd-Freund (de_DE)
- MSantos (pt)
- SINF-KEN (fr_FR, nl_NL)
- aperechnev (ru)
- edsonwolf
- fdecunta (es_ES)
- wheatfox (zh_CN, zh_HANS)

##### 语言进展

- 简体中文 (zh-cn) (进度: 7%)
- 繁体中文 (zh-tw) (进度: 3%)
- 荷兰语 (nl) (进度: 1%)
- 法语 (fr) (进度: 1%)
- 德语 (de) (进度: 1%)
- 希腊语 (el) (进度: 1%)
- 印度尼西亚语 (id) (进度: 1%)
- 意大利语 (it) (进度: 5%)
- 韩语 (ko) (进度: 32%)
- 挪威语 (nb-no) (进度: 1%)
- 波斯语 (fa-ir) (进度: 3%)
- 波兰语 (进度: 2%)
- 葡萄牙语 (进度: 0%)
- 葡萄牙语 (pt-br) (进度: 22%)
- 西班牙语 (es) (进度: 36%)
- 土耳其语 (tr) (进度: 2%)

感谢所有为翻译或审阅文档做出贡献的人。

请帮助推广这一努力到你所在的本地用户组，我们始终需要更多的志愿者。

#### DocEng 维护的包

在本季度，doceng@ 维护的包进行了以下工作：

- [textproc/docproj-legacy](https://cgit.freebsd.org/ports/tree/textproc/docproj-legacy/): 修复与 DBLATEX 的构建问题
- [textproc/docproj-legacy](https://cgit.freebsd.org/ports/tree/textproc/docproj-legacy/): 修复 poudriere 警告
- [textproc/rubygem-asciidoctor-epub3](https://cgit.freebsd.org/ports/tree/textproc/rubygem-asciidoctor-epub3/): 添加缺失的运行时依赖
- [www/gohugo](https://cgit.freebsd.org/ports/tree/www/gohugo/): 更新到 0.125.4

#### 未解决问题

在 bugzilla 中有 3 个分配给 doceng@ 的开放 PR：

- [279815 状态报告: ERR_TOO_MANY_REDIRECTS](https://bugs.freebsd.org/bugzilla/show_bug.cgi?id=279815)
- [276923 www/gohugo 在 poudriere 下的链接错误](https://bugs.freebsd.org/bugzilla/show_bug.cgi?id=276923)
- [267274 请从当前 FreeBSD 网站中移除 zh-CN 手册](https://bugs.freebsd.org/bugzilla/show_bug.cgi?id=267274)

在本季度，doceng@ 关闭了 3 个 PR：

- [278904 misc/freebsd-doc-en: HTML 应该是单页](https://bugs.freebsd.org/bugzilla/show_bug.cgi?id=278904)
- [278732 www/gohugo: 更新到 v125.5](https://bugs.freebsd.org/bugzilla/show_bug.cgi?id=278732)
- [278504 textproc/rubygem-asciidoctor-epub3: 缺少 rubygem-asciidoctor-epub3  Port 的运行时依赖](https://bugs.freebsd.org/bugzilla/show_bug.cgi?id=278504)

## Ports

影响 Ports Collection 的变更，无论是影响大部分树的广泛变更还是单个 Port 本身。

### GCC 在 FreeBSD 上

链接:

[GCC 项目](https://gcc.gnu.org/) URL: [https://gcc.gnu.org/](https://gcc.gnu.org/)

[GCC 11 发布系列](https://gcc.gnu.org/gcc-11/) URL: [https://gcc.gnu.org/gcc-11/](https://gcc.gnu.org/gcc-11/)

[GCC 12 发布系列](https://gcc.gnu.org/gcc-12/) URL: [https://gcc.gnu.org/gcc-12/](https://gcc.gnu.org/gcc-12/)

[GCC 13 发布系列](https://gcc.gnu.org/gcc-13/) URL: [https://gcc.gnu.org/gcc-13/](https://gcc.gnu.org/gcc-13/)

[GCC 14 发布系列](https://gcc.gnu.org/gcc-14/) URL: [https://gcc.gnu.org/gcc-14/](https://gcc.gnu.org/gcc-14/)

联系人: Lorenzo Salvadore <salvadore@FreeBSD.org>

上游已发布 [GCC 14.1](https://gcc.gnu.org/gcc-14)。因此，已创建了 Port  [lang/gcc-14](https://cgit.freebsd.org/ports/tree/lang/gcc-14/)，同时创建了 [lang/gcc15-devel](https://cgit.freebsd.org/ports/tree/lang/gcc15-devel/)，该 Port 跟踪最新的开发 GCC 版本。之前的 GCC 主要版本也在更新中。

与之前报告中的计划相反，本季度在现有 GCC  Port 的错误修复工作非常有限。这是因为我发现上游对在 FreeBSD 上支持 GCC 的兴趣增加，但 GCC 源代码在我们的平台上无法开箱即用，需要大量补丁，这些补丁存在于我们的 Port 树框架中。因此，有必要集中精力将所有这些补丁上游化，最好一次性进行，而不是像之前那样逐个处理，并定期运行测试套件，修复所有失败的测试。同时，我正在开发一个新的自动化设置，以尽可能高效地构建和测试所有支持的 GCC 版本，包括从源代码构建 GCC，但不使用 Port 树框架支持。所有这些都显著减缓了通常的 GCC  Port 维护（-devel  Port 的用户可能已经注意到更新频率降低），但我相信这最终会带来回报。

还需注意的是，[Robert Clausecker](mailto:fuz@FreeBSD.org) 已为 riscv64 架构启用 [lang/gcc11](https://cgit.freebsd.org/ports/tree/lang/gcc11/)、[lang/gcc12](https://cgit.freebsd.org/ports/tree/lang/gcc12/) 和 [lang/gcc13](https://cgit.freebsd.org/ports/tree/lang/gcc13/)，因为这些 Port 在 15-CURRENT 上构建良好。

### FreeBSD 上的 KDE

链接：

[KDE/FreeBSD 计划](https://freebsd.kde.org/) URL: [https://freebsd.kde.org/](https://freebsd.kde.org/)

[FreeBSD — KDE 社区 Wiki](https://community.kde.org/FreeBSD) URL: [https://community.kde.org/FreeBSD](https://community.kde.org/FreeBSD)

联系人：Adriaan de Groot <kde@FreeBSD.org>

KDE 在 FreeBSD 上的项目负责将 CMake、Qt 及 KDE 社区的软件打包到 FreeBSD  Port 树中。这些软件包括一个完整的桌面环境，称为 KDE Plasma（支持 X11 和 Wayland），以及数百个可在任何 FreeBSD 机器上使用的应用程序。 [KDE 团队](mailto:kde@FreeBSD.org) 是 [desktop@](mailto:desktop@FreeBSD.org) 的一部分，构建软件堆栈以使 FreeBSD 成为美观且可用的日常图形桌面工作站。

我们错过了一个季度，在此期间，KDE 社区庆祝了 KDE Frameworks 6、KDE Plasma 6 和 KDE Gear 的 KDE Megarelease。最新的软件仍未在 FreeBSD 上提供，正在等待更多测试和一些集成工作。

#### 基础设施

CMake 已更新多次，现在是版本 3.29.6，为最新的上游版本。 Port 框架中的 CMake 现在支持为测试设置并行构建。

Qt5 现在处于长期支持状态，仅偶尔更新。5.15.14 的更新以及 WebEngine 到 5.15.17 的更新已在 5 月完成。

Qt6 和 Qt 的 Python 绑定 Pyside 已更新到版本 6.7.2。

#### KDE 堆栈

KDE Gear、Plasma 和 Frameworks 的发布非常规律。这些更新仅以零散的形式到达 FreeBSD  Port 树，原因是兼容性和测试工作的滞后。

- KDE Frameworks 达到版本 6.3.0
- KDE Plasma 6 桌面更新到版本 6.0.4
- KDE Gear 6 尚未到达 Port 树

#### 相关 Port 

KDE 生态系统包括广泛的 Port ，大多数由 [kde@](mailto:kde@FreeBSD.org) 维护，所有 Port 都建立在 Qt 和 KDE Frameworks 的共享基础上。[KDE 团队](mailto:kde@FreeBSD.org) 根据需要更新所有这些 Port 。本季度 KDE 团队再次感谢 [Tobias C. Berner](mailto:tcberner@FreeBSD.org)、[Gleb Popov](mailto:arrowd@FreeBSD.org) 和 [Jason E. Hale](mailto:jhale@FreebSD.org) 保持最新状态。


### FreeBSD Erlang 生态系统 Port 更新

链接：
[FreeBSD Erlang Wiki](https://wiki.freebsd.org/Erlang) URL: [https://wiki.freebsd.org/Erlang](https://wiki.freebsd.org/Erlang)

[Erlang/OTP 语言](https://erlang.org/) URL: [https://erlang.org/](https://erlang.org/)

[Elixir 语言](https://elixir-lang.org/) URL: [https://elixir-lang.org/](https://elixir-lang.org/)

[Gleam 语言](https://gleam.run/) URL: [https://gleam.run/](https://gleam.run/)

联系人：FreeBSD Erlang 邮件列表 <erlang@FreeBSD.org>

Erlang 运行时系统，通常称为 BEAM，为 FreeBSD  Port 集合中的多种编程语言和应用程序提供运行时支持。

2024 年的显著变化包括：

- 添加 OTP27（最新的 Erlang 运行时发布）、Elixir 1.17 和 Gleam 1.20
- 2024 年至今已有超过 57 个点发布更新
- 改进了 Erlang  Port 中的内联文档
- 将 RabbitMQ  Port 迁移到通用 UNIX 构建，从而与 Elixir 的构建时依赖解耦。这使得 RabbitMQ 可以迁移到最新支持的发布版本。RabbitMQ 用户需要每季度更新，以避免停留在不再受支持的 Erlang/OTP + RabbitMQ 发布版本上

请注意，由于上游 Erlang OTP 团队仅承诺支持两个最新的主要版本，OTP26-27 正在不断收到点更新，但较旧的 Erlang 运行时版本现在不太可能获得安全和错误修复。

在 2024 年第三季度，Erlang 团队计划：

- 将基础 [lang/erlang](https://cgit.freebsd.org/ports/tree/lang/erlang/)  Port 迁移到 OTP26，并更新相关依赖

欢迎额外的测试和社区贡献，请在邮件列表中联系，尤其是如果您能够帮助测试特定的 Port 更新。

## 第三方项目

许多项目基于 FreeBSD 或将 FreeBSD 的组件融入其项目中。由于这些项目可能引起 FreeBSD 社区的广泛关注，我们有时会在季度报告中包含这些项目提交的简要更新。FreeBSD 项目对这些提交中的任何声明的准确性或真实性不做任何表示。

### 容器与 FreeBSD: Pot、Potluck 和 Potman

链接：
[Pot 在 GitHub 上的组织](https://github.com/bsdpot) URL: [https://github.com/bsdpot](https://github.com/bsdpot)

联系人：Luca Pizzamiglio (Pot) <pizzamig@FreeBSD.org>

联系人：Bretton Vine (Potluck) <bv@honeyguide.eu>

联系人：Michael Gmelin (Potman) <grembo@FreeBSD.org>

Pot 是一款 jail 管理工具 [也支持通过 Nomad 进行编排](https://www.freebsd.org/news/status/report-2020-01-2020-03/#pot-and-the-nomad-pot-driver)。Potluck 旨在成为 FreeBSD 和 Pot 的 Dockerhub，提供 Pot 风味和完整的容器镜像，用于 Pot 和许多情况下的 Nomad。

本季度没有新的 [Pot](https://github.com/bsdpot/pot) 发布。

然而，Potluck 图像再次看到了一些更新。所有图像都已为新的季度包重新构建，添加了一个新的 [Opensearch](https://github.com/bsdpot/potluck/tree/master/opensearch) 容器。额外的功能、更新和修复已提交到 [PostgreSQL-Patroni](https://github.com/bsdpot/potluck/tree/master/postgresql-patroni) 或 [Nomad-Server-TLS](https://github.com/bsdpot/potluck/tree/master/nomad-server-tls) 等容器中。

目前总共有 58 个容器镜像和模板可用。

一如既往，欢迎反馈和补丁。

赞助商：Nikulipe UAB、Honeyguide Group
